# 脚本区别说明

## 两个脚本的区别

### 1. `create_user_cloud.py` - 直接创建用户

**功能：**
- ✅ **只在云端数据库创建用户"刘紫湲"**
- ❌ **不拉取本地数据库信息**
- ✅ 简单快速，适合快速修复

**创建的用户信息：**
- 用户名：`刘紫湲`
- 昵称：`刘紫湲`
- 密码：`123456`（**新设置的密码**）
- 角色：`USER`（学生）
- 是否激活：`True`

**适用场景：**
- 快速修复云端登录问题
- 不需要同步本地用户的其他信息（手机号、邮箱等）
- 只需要创建一个可以登录的用户

---

### 2. `sync_user_to_cloud.py` - 同步本地用户数据

**功能：**
- ✅ **从本地数据库读取用户"刘紫湲"的所有信息**
- ✅ **将完整用户数据同步到云端数据库**
- ✅ 包括密码、手机号、邮箱、学号等所有字段

**同步的用户信息：**
- 用户名：与本地相同
- 昵称：与本地相同
- 密码：**与本地数据库中的密码相同**（可能是 `123456` 或 `zhaxia`，取决于本地设置）
- 手机号：与本地相同
- 邮箱：与本地相同
- 学号：与本地相同
- 角色：与本地相同
- 性别、年龄、学校等：与本地相同

**适用场景：**
- 需要完整同步用户数据
- 需要保持云端和本地密码一致
- 需要同步用户的完整信息（手机号、邮箱等）

---

## 如何选择？

### 选择 `create_user_cloud.py` 如果：
- ✅ 只需要快速修复登录问题
- ✅ 不需要同步本地用户的其他信息
- ✅ 可以接受新密码 `123456`

### 选择 `sync_user_to_cloud.py` 如果：
- ✅ 需要保持云端和本地密码一致
- ✅ 需要同步用户的完整信息（手机号、邮箱等）
- ✅ 需要确保云端用户数据与本地完全一致

---

## 密码说明

### 使用 `create_user_cloud.py` 后：
- **密码：`123456`**（新设置的密码）
- 与本地数据库密码可能不同

### 使用 `sync_user_to_cloud.py` 后：
- **密码：与本地数据库中的密码相同**
- 如果本地密码是 `123456`，云端也是 `123456`
- 如果本地密码是 `zhaxia`，云端也是 `zhaxia`

---

## 示例

### 场景1：快速修复
```bash
# 只创建用户，密码设为 123456
$env:DATABASE_URL="云端数据库URL"
python create_user_cloud.py
```
**结果：** 云端有用户"刘紫湲"，密码是 `123456`

### 场景2：完整同步
```bash
# 从本地同步所有数据，包括密码
$env:CLOUD_DATABASE_URL="云端数据库URL"
python sync_user_to_cloud.py
```
**结果：** 云端有用户"刘紫湲"，密码与本地相同（可能是 `123456` 或 `zhaxia`）

---

## 如何查看本地密码？

如果你不确定本地数据库中的密码是什么，可以：

1. **查看本地数据库**：
   ```bash
   # 连接本地数据库
   mysql -u shellykoi -p123456koiii heart_care
   
   # 查看用户表
   SELECT username, nickname FROM users WHERE username='刘紫湲' OR nickname='刘紫湲';
   ```

2. **尝试常见密码**：
   - `123456`
   - `zhaxia`

3. **使用同步脚本**：
   - 运行 `sync_user_to_cloud.py` 会自动同步本地密码

---

## 总结

| 脚本 | 是否拉取本地数据 | 密码来源 | 适用场景 |
|------|----------------|---------|---------|
| `create_user_cloud.py` | ❌ 否 | 新设置：`123456` | 快速修复 |
| `sync_user_to_cloud.py` | ✅ 是 | 与本地相同 | 完整同步 |

